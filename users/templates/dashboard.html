{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="background-overlay"></div>



<div class="dashboard-container">


    <div class="dashboard-segment profiles-selection-container">

      

        {% for profile in profiles %}
        <form method="post" class="profile-container">
            {% csrf_token %}
            <input type="hidden" name="profile_id" value="{{ profile.id }}">
            <button type="submit" name="activate_profile" class="profile-button" {% if profile.active %}
                style="background-color: var(--secondary); color: black;" {% endif %}>
                {{ profile.job_title }}
            </button>
        </form>
        {% endfor %}

        <div class="profile-buttons-container">
            <div class="edit-profile-container">Edit</div>
            <div class="delete-profile-container">Delete</div>
        </div>


        {% if profiles_count < 5 %}
        <div class="profile-add-container">
            +
        </div>
        {% endif %}

        <h3>Functions</h3>


        <div class="profile-buttons-container">
            <div class="search-option-container selected-option-effect">Search</div>
            <div class="history-option-container">History</div>
        </div>





    </div>

    <div class="dashboard-divider"></div>

    <div class="dashboard-segment dashboard-content-container">
        
        <div class="dashboard-content-display search-content-container">
           <h2>Search</h1>
            {% for result in jb%}
            <p>{{result.title}}</p>
            <p>{{result.description}}</p>
            <p>{{result.location.display_name}}</p>
            <p>{{result.redirect_url}}</p>
            <p>{{result.company.display_name}}</p>
            <p>{{result.salary_min}}</p>
            <p>{{result.salary_max}}</p>
            {% endfor%}


            
            
        </div>

        <div class="dashboard-content-display history-content-container">
            <h2>History</h1>
            
        </div>

    </div>


</div>

<div class="create-profile">
    <h2>Create A New Profile</h2>
    <form method="post" class="profile-form">
        {% csrf_token %}

        <div class="profile-fields-container">
            <label for="job_title">Job Title:</label>
            <input type="text" id="job_title" name="job_title" required>
        </div>

        <div class="profile-fields-container">
            <label for="min_salary">Minimum Salary:</label>
            <input type="number" id="min_salary" name="min_salary">
        </div>

        <div class="profile-fields-container">
            <label for="is_full_time">Full-Time:</label>
            <input type="checkbox" id="is_full_time" name="is_full_time">
        </div>

        <div class="profile-fields-container">
            <label for="city">City:</label>
            <input type="text" id="city" name="city" required>
        </div>

        <div class="pop-up-options-container">
            <button type="submit" name="create_profile">Create Profile</button>
            <div class="exit-popup-container">Exit</div>
        </div>

    </form>
</div>


<div class="edit-profile">
    <h2>Edit this Profile</h2>
    <form method="post" class="profile-form">
        {% csrf_token %}

        <div class="profile-fields-container">
            <label for="job_title">Job Title:</label>
            <input type="text" id="job_title" name="job_title" value="{{active_profile.job_title}}" required>
        </div>

        <div class="profile-fields-container">
            <label for="min_salary">Minimum Salary:</label>
            <input type="number" id="min_salary" name="min_salary" value="{{active_profile.min_salary}}" required>
        </div>

        <div class="profile-fields-container">
            <label for="is_full_time">Full-Time:</label>
            <input type="checkbox" id="is_full_time" name="is_full_time" {% if active_profile.is_full_time %} checked {% endif %}>
        </div>

        <div class="profile-fields-container">
            <label for="city">City:</label>
            <input type="text" id="city" name="city" value="{{active_profile.city}}" required>
        </div>

        <input type="hidden" name="profile_id" value="{{ active_profile.id }}">

        <div class="pop-up-options-container">
            <button type="submit" name="edit_profile">Save</button>
            <div class="exit-popup-container">Exit</div>
        </div>

    </form>
</div>


<div class="delete-profile-popup-container">

    <p>Are you sure you want to delete:</p>
    <p style="color: red;">{{ active_profile.job_title }}</p>
    <form method="post" class="pop-up-options-container">
        {% csrf_token %}
        <input type="hidden" name="profile_id" value="{{ active_profile.id }}">
        <button type="submit" name="delete_profile" class="delete-profile-confirm">Confirm</button>
        <div class="exit-popup-container">Exit</div>
    </form>

</div>


{% endblock %}